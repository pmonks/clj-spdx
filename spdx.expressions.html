<!DOCTYPE html PUBLIC ""
    "">

<html><head><meta charset="UTF-8" /><title>spdx.expressions documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spdx</span></div></div></li><li class="depth-2 branch"><a href="spdx.exceptions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exceptions</span></div></a></li><li class="depth-2 branch current"><a href="spdx.expressions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>expressions</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-3 branch"><a href="spdx.impl.mapping.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mapping</span></div></a></li><li class="depth-3"><a href="spdx.impl.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-2 branch"><a href="spdx.licenses.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>licenses</span></div></a></li><li class="depth-2"><a href="spdx.matching.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>matching</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="spdx.expressions.html#var-extract-ids"><div class="inner"><span>extract-ids</span></div></a></li><li class="depth-1"><a href="spdx.expressions.html#var-init.21"><div class="inner"><span>init!</span></div></a></li><li class="depth-1"><a href="spdx.expressions.html#var-normalise"><div class="inner"><span>normalise</span></div></a></li><li class="depth-1"><a href="spdx.expressions.html#var-parse"><div class="inner"><span>parse</span></div></a></li><li class="depth-1"><a href="spdx.expressions.html#var-parse-with-info"><div class="inner"><span>parse-with-info</span></div></a></li><li class="depth-1"><a href="spdx.expressions.html#var-unparse"><div class="inner"><span>unparse</span></div></a></li><li class="depth-1"><a href="spdx.expressions.html#var-valid.3F"><div class="inner"><span>valid?</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">spdx.expressions</h1><div class="doc"><pre class="plaintext">SPDX license expression functionality. This functionality is bespoke (it is not provided by Spdx-Java-Library).
</pre></div><div class="public anchor" id="var-extract-ids"><h3>extract-ids</h3><div class="usage"><code>(extract-ids parse-result)</code><code>(extract-ids parse-result include-or-later)</code></div><div class="doc"><pre class="plaintext">Extract all SPDX ids (as a set of strings) from the given parse result, optionally including the 'or later' indicator ('+') after license ids that have that designation.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/clj-spdx/blob/main/src/spdx/expressions.clj#L201">view source</a></div></div><div class="public anchor" id="var-init.21"><h3>init!</h3><div class="usage"><code>(init!)</code></div><div class="doc"><pre class="plaintext">Initialises this namespace upon first call (and does nothing on subsequent
calls), returning nil. Consumers of this namespace are not required to call
this fn, as initialisation will occur implicitly anyway; it is provided to
allow explicit control of the cost of initialisation to callers who need it.</pre></div><div class="src-link"><a href="https://github.com/pmonks/clj-spdx/blob/main/src/spdx/expressions.clj#L215">view source</a></div></div><div class="public anchor" id="var-normalise"><h3>normalise</h3><div class="usage"><code>(normalise s)</code></div><div class="doc"><pre class="plaintext">'Normalises' an SPDX expression, by running it through parse then unparse.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/clj-spdx/blob/main/src/spdx/expressions.clj#L185">view source</a></div></div><div class="public anchor" id="var-parse"><h3>parse</h3><div class="usage"><code>(parse s)</code></div><div class="doc"><pre class="plaintext">Attempt to parse the given string as an SPDX license expression, returning a
data structure representing the parse tree or nil if the string cannot be
parsed.

See SPDX Specification Annex D for details on SPDX license expressions:
<a href="https://spdx.github.io/spdx-spec/v2.3/SPDX-license-expressions/">https://spdx.github.io/spdx-spec/v2.3/SPDX-license-expressions/</a>

Notes:
* The parser normalises SPDX ids to their canonical case
  e.g. aPAcHe-2.0 -&gt; Apache-2.0

* The parser removes redundant grouping
  e.g. (((((Apache-2.0)))))) -&gt; Apache-2.0

* When a license is modified with the "or later" modifier ('+'), the two
  are grouped

* When a license is modified WITH a license exception, the two are grouped

Examples:

"Apache-2.0"
-&gt; [{:license-id "Apache-2.0"}]

"GPL-2.0+"
-&gt; [{:license-id "GPL-2.0" :or-later true}]

"GPL-2.0 WITH Classpath-exception-2.0"
-&gt; [{:license-id "GPL-2.0"
     :license-exception-id "Classpath-exception-2.0"}]

"CDDL-1.1 OR (GPL-2.0+ WITH Classpath-exception-2.0)"
-&gt; [{:license-id "CDDL-1.1"}
    :or
    {:license-id "GPL-2.0"
     :or-later true
     :license-exception-id "Classpath-exception-2.0"}]</pre></div><div class="src-link"><a href="https://github.com/pmonks/clj-spdx/blob/main/src/spdx/expressions.clj#L117">view source</a></div></div><div class="public anchor" id="var-parse-with-info"><h3>parse-with-info</h3><div class="usage"><code>(parse-with-info s)</code></div><div class="doc"><pre class="plaintext">As for parse, but returns instaparse parse error info if parsing fails,
instead of nil.

See also <a href="https://github.com/Engelberg/instaparse#parse-errors">https://github.com/Engelberg/instaparse#parse-errors</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/clj-spdx/blob/main/src/spdx/expressions.clj#L88">view source</a></div></div><div class="public anchor" id="var-unparse"><h3>unparse</h3><div class="usage"><code>(unparse parse-result)</code></div><div class="doc"><pre class="plaintext">Turn a (successful) parse result back into a (normalised) SPDX expression
string. Results are undefined for invalid handcrafted parse trees.</pre></div><div class="src-link"><a href="https://github.com/pmonks/clj-spdx/blob/main/src/spdx/expressions.clj#L174">view source</a></div></div><div class="public anchor" id="var-valid.3F"><h3>valid?</h3><div class="usage"><code>(valid? s)</code></div><div class="doc"><pre class="plaintext">Is the given string a valid SPDX license expression?

Note: if you intend to parse the given string if it's valid, it's more
efficient to call parse directly and check for a nil result.</pre></div><div class="src-link"><a href="https://github.com/pmonks/clj-spdx/blob/main/src/spdx/expressions.clj#L192">view source</a></div></div></div></body></html>